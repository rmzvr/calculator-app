const ROOT_ELEMENT=document.documentElement,THEME_SWITCHER=document.querySelector(".theme-switcher__body"),THEME_BUTTONS=document.querySelectorAll(".theme-switcher__button"),THEME_SLIDER=document.querySelector(".theme-switcher__slider"),DISPLAY=document.querySelector(".calc__display"),KEYPAD=document.querySelector(".calc__keypad");let themes={1:"neutral",2:"light",3:"dark"},specialCharacters=[".","+","-","*","/"];if(null==sessionStorage.getItem("theme")){let checkedButtonPosition=getCheckedButton(THEME_BUTTONS).dataset.themeNumber;sessionStorage.setItem("theme",checkedButtonPosition)}function moveSlider(e){THEME_SLIDER.style.left={1:"7%",2:"39%",3:"70%"}[e]}function getCheckedButton(e){return(e=!Array.isArray(e)?Array.from(e):e).find(e=>e.checked)}function switchTheme(){let e=Array.from(THEME_BUTTONS);ROOT_ELEMENT.setAttribute("data-theme",themes[sessionStorage.getItem("theme")]),e.forEach(e=>{var t=e.dataset.themeNumber;sessionStorage.getItem("theme")==t&&e.setAttribute("checked",!0)}),moveSlider(sessionStorage.getItem("theme"))}function renderInitialZeroOnDisplay(){DISPLAY.textContent=0}function deleteLastCharacter(){DISPLAY.textContent=DISPLAY.textContent.substr(0,DISPLAY.textContent.length-1)}function cleanDisplay(){DISPLAY.textContent=""}function renderCharacter(e){DISPLAY.textContent+=e}function calculateExpression(expression){return eval(expression)}function renderResultOfExpression(e){DISPLAY.textContent=+e.toFixed(2)}switchTheme(),THEME_SWITCHER.addEventListener("click",e=>{"radio"===e.target.type&&(e=e.target.dataset.themeNumber,sessionStorage.setItem("theme",e),switchTheme())}),KEYPAD.addEventListener("click",e=>{var t=e.target.dataset.type;const r=e.target.textContent;var n=DISPLAY.textContent;if(!e.target.classList.contains("calc__keypad")){if("delete"===t)return"0"==n?void 0:(deleteLastCharacter(),void(DISPLAY.innerText||renderInitialZeroOnDisplay()));if("reset"===t)return cleanDisplay(),void renderInitialZeroOnDisplay();if("equal"===t)return"0"==n?void 0:void renderResultOfExpression(calculateExpression(n));if(!(10<n.length)){if("0"==n&&cleanDisplay(),"0"==n&&"-"==r)return cleanDisplay(),void renderCharacter(r);if("0"==n&&"."==r)return renderCharacter(0),void renderCharacter(r);if("."==r){let e=DISPLAY.textContent.split("");t=e.filter(e=>!Number.isInteger(+e));if("."==t[t.length-1])return}if(specialCharacters.find(e=>e===r)){if(!n||"0"==n)return void renderInitialZeroOnDisplay();n=DISPLAY.innerText.split(""),n=n[n.length-1];return Number.isInteger(+n)?void renderCharacter(r):(deleteLastCharacter(),void renderCharacter(r))}renderCharacter(r)}}}),window.addEventListener("keydown",e=>{const t=e.key;var r=DISPLAY.textContent;if("/"===t&&e.preventDefault(),"Backspace"===t){if("0"==r)return;deleteLastCharacter(),DISPLAY.innerText||renderInitialZeroOnDisplay()}if("="===t||"Enter"===t){if("0"==r)return;renderResultOfExpression(calculateExpression(r))}if(!(10<r.length)){if("0"==r&&"-"==t)return cleanDisplay(),void renderCharacter(t);if("0"==r&&"."==t&&renderCharacter(t),"."==t){let e=DISPLAY.textContent.split("");var n=e.filter(e=>!Number.isInteger(+e));if("."==n[n.length-1])return}if(specialCharacters.find(e=>e===t)){n=DISPLAY.innerText.split(""),n=n[n.length-1];if(Number.isInteger(+n))return void renderCharacter(t);deleteLastCharacter(),renderCharacter(t)}Number.isInteger(+t)&&("0"==r&&cleanDisplay(),renderCharacter(t))}});