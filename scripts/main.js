const ROOT_ELEMENT=document.documentElement,SLIDER=document.querySelector(".slider"),DISPLAY=document.querySelector(".calc__display"),KEYPAD=document.querySelector(".calc__keypad");let themes={1:"neutral",2:"light",3:"dark"},specialCharacters=[".","+","-","*","/"];function switchTheme(){ROOT_ELEMENT.setAttribute("data-theme",themes[sessionStorage.getItem("theme")]),SLIDER.value=sessionStorage.getItem("theme")}function renderInitialZeroOnDisplay(){DISPLAY.textContent=0}function deleteLastCharacter(){DISPLAY.textContent=DISPLAY.textContent.substr(0,DISPLAY.textContent.length-1)}function cleanDisplay(){DISPLAY.textContent=""}function renderCharacter(e){DISPLAY.textContent+=e}function calculateExpression(expression){return eval(expression)}function renderResultOfExpression(e){DISPLAY.textContent=+e.toFixed(2)}null==sessionStorage.getItem("theme")&&sessionStorage.setItem("theme",SLIDER.value),switchTheme(),SLIDER.addEventListener("change",()=>{sessionStorage.setItem("theme",SLIDER.value),switchTheme()}),KEYPAD.addEventListener("click",e=>{var t=e.target.dataset.type;const r=e.target.textContent;var n=DISPLAY.textContent;if(!e.target.classList.contains("calc__keypad")){if("delete"===t)return"0"==n?void 0:(deleteLastCharacter(),void(DISPLAY.innerText||renderInitialZeroOnDisplay()));if("reset"===t)return cleanDisplay(),void renderInitialZeroOnDisplay();if("equal"===t)return"0"==n?void 0:void renderResultOfExpression(calculateExpression(n));if(!(10<n.length)){if("0"==n&&cleanDisplay(),"0"==n&&"."==r)return renderCharacter(0),void renderCharacter(r);if(specialCharacters.find(e=>e===r)){if(!n||"0"==n)return void renderInitialZeroOnDisplay();n=DISPLAY.innerText.split(""),n=n[n.length-1];return Number.isInteger(+n)?void renderCharacter(r):(deleteLastCharacter(),void renderCharacter(r))}renderCharacter(r)}}}),window.addEventListener("keydown",e=>{const t=e.key;var r=DISPLAY.textContent;if("/"===t&&e.preventDefault(),"Backspace"===t){if("0"==r)return;deleteLastCharacter(),DISPLAY.innerText||renderInitialZeroOnDisplay()}if("="===t||"Enter"===t){if("0"==r)return;renderResultOfExpression(calculateExpression(r))}if(!(10<r.length)){if("0"==r&&"."==t&&renderCharacter(t),specialCharacters.find(e=>e===t)){e=DISPLAY.innerText.split(""),e=e[e.length-1];if(Number.isInteger(+e))return void renderCharacter(t);deleteLastCharacter(),renderCharacter(t)}Number.isInteger(+t)&&("0"==r&&cleanDisplay(),renderCharacter(t))}});